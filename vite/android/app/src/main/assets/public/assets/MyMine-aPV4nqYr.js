import{m as S,k as y,v as C,w as b,g as r,d as t,c as i,t as o,b as c,Q as v,aR as _,F as g,q as f,z as D,y as M,I as w}from"./index-C0qELFvz.js";import{P as x}from"./index-DXiPnwUA.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={name:"MyMine",data(){return{today:null,yesterday:null,thisMonth:null,expandedCard:null,loading:!1}},methods:{async onRefresh(){await this.getToday(),setTimeout(()=>{S("刷新成功"),this.loading=!1},1e3)},async getToday(){const n=new Date,s=n.getFullYear()+"-"+String(n.getMonth()+1).padStart(2,"0")+"-"+String(n.getDate()).padStart(2,"0"),u=new Date(n);u.setDate(n.getDate()-1);const m=u.getFullYear()+"-"+String(u.getMonth()+1).padStart(2,"0")+"-"+String(u.getDate()).padStart(2,"0"),e=new Date(n.getFullYear(),n.getMonth(),1),a=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0");try{const[d,h,l]=await Promise.all([y.statistics.getDateRangeStatistics({startDate:s,endDate:s}),y.statistics.getDateRangeStatistics({startDate:m,endDate:m}),y.statistics.getDateRangeStatistics({startDate:a,endDate:s})]);this.today=d,this.yesterday=h,this.thisMonth=l}catch(d){console.error("获取统计数据失败:",d)}},formatNumber(n){return new Intl.NumberFormat().format(n)},formatMoney(n){return new Intl.NumberFormat("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n)},formatDate(n){return new Intl.DateTimeFormat("zh-CN",{month:"long",day:"numeric",weekday:"long"}).format(n)},getYesterday(){const n=new Date;return n.setDate(n.getDate()-1),n},getCurrentMonth(){return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long"}).format(new Date)},toggleCard(n){this.expandedCard=this.expandedCard===n?null:n}},mounted(){this.getToday()}},p={class:"statistics-dashboard"},I={class:"stats-groups"},F={class:"card-header"},P={class:"date-tag"},R={class:"stats-grid"},T={class:"stat-item"},V={class:"stat-content"},Y={class:"stat-value"},z={class:"stat-item"},O={class:"stat-content"},q={class:"stat-value"},B={class:"stat-item"},E={class:"stat-content"},L={class:"stat-value"},Q={class:"details-section"},U={class:"details-header"},j={class:"total-cost"},A={class:"product-table"},G={class:"card-header"},H={class:"date-tag"},J={class:"stats-grid"},K={class:"stat-item"},W={class:"stat-content"},X={class:"stat-value"},Z={class:"stat-item"},$={class:"stat-content"},tt={class:"stat-value"},st={class:"stat-item"},et={class:"stat-content"},at={class:"stat-value"},ot={class:"details-section"},lt={class:"details-header"},nt={class:"total-cost"},dt={class:"product-table"},rt={class:"card-header"},it={class:"date-tag"},ct={class:"stats-grid"},ut={class:"stat-item"},mt={class:"stat-content"},ht={class:"stat-value"},yt={class:"stat-item"},vt={class:"stat-content"},_t={class:"stat-value"},gt={class:"stat-item"},ft={class:"stat-content"},Dt={class:"stat-value"},Mt={class:"details-section"},St={class:"details-header"},Ct={class:"total-cost"},bt={class:"product-table"};function wt(n,s,u,m,e,a){const d=w,h=x;return r(),C(h,{modelValue:e.loading,"onUpdate:modelValue":s[3]||(s[3]=l=>e.loading=l),onRefresh:a.onRefresh},{default:b(()=>[t("div",p,[t("div",I,[e.today?(r(),i("div",{key:0,class:D([{expanded:e.expandedCard==="today"},"stats-card"]),onClick:s[0]||(s[0]=l=>a.toggleCard("today"))},[t("div",F,[s[4]||(s[4]=t("h3",{class:"card-title"},"今日数据",-1)),t("span",P,o(a.formatDate(new Date)),1)]),t("div",R,[t("div",T,[c(d,{class:"stat-icon",name:"orders-o"}),t("div",V,[s[5]||(s[5]=t("div",{class:"stat-label"},"订单数",-1)),t("div",Y,o(a.formatNumber(e.today.orderCount)),1)])]),t("div",z,[c(d,{class:"stat-icon",name:"gold-coin-o"}),t("div",O,[s[6]||(s[6]=t("div",{class:"stat-label"},"销售额",-1)),t("div",q,"¥"+o(e.today.totalSales),1)])]),t("div",B,[c(d,{class:"stat-icon",name:"chart-trending-o"}),t("div",E,[s[7]||(s[7]=t("div",{class:"stat-label"},"总利润",-1)),t("div",L,"¥"+o(a.formatMoney(e.today.totalProfit)),1)])])]),v(t("div",Q,[t("div",U,[s[8]||(s[8]=t("h4",null,"商品销售详情",-1)),t("div",j,"总成本: ¥"+o(a.formatMoney(e.today.totalCost)),1)]),t("div",A,[t("table",null,[s[9]||(s[9]=t("thead",null,[t("tr",null,[t("th",null,"商品名称"),t("th",null,"销售数量"),t("th",null,"销售额"),t("th",null,"利润")])],-1)),t("tbody",null,[(r(!0),i(g,null,f(e.today.productSalesInfoDTOS,l=>(r(),i("tr",{key:l.productId},[t("td",null,o(l.productName),1),t("td",null,o(l.quantity),1),t("td",null,"¥"+o(a.formatMoney(l.totalSales)),1),t("td",null,"¥"+o(a.formatMoney(l.totalProfit)),1)]))),128))])])])],512),[[_,e.expandedCard==="today"]])],2)):M("",!0),e.yesterday?(r(),i("div",{key:1,class:D([{expanded:e.expandedCard==="yesterday"},"stats-card"]),onClick:s[1]||(s[1]=l=>a.toggleCard("yesterday"))},[t("div",G,[s[10]||(s[10]=t("h3",{class:"card-title"},"昨日数据",-1)),t("span",H,o(a.formatDate(a.getYesterday())),1)]),t("div",J,[t("div",K,[c(d,{class:"stat-icon",name:"orders-o"}),t("div",W,[s[11]||(s[11]=t("div",{class:"stat-label"},"订单数",-1)),t("div",X,o(a.formatNumber(e.yesterday.orderCount)),1)])]),t("div",Z,[c(d,{class:"stat-icon",name:"gold-coin-o"}),t("div",$,[s[12]||(s[12]=t("div",{class:"stat-label"},"销售额",-1)),t("div",tt,"¥"+o(a.formatMoney(e.yesterday.totalSales)),1)])]),t("div",st,[c(d,{class:"stat-icon",name:"chart-trending-o"}),t("div",et,[s[13]||(s[13]=t("div",{class:"stat-label"},"总利润",-1)),t("div",at,"¥"+o(a.formatMoney(e.yesterday.totalProfit)),1)])])]),v(t("div",ot,[t("div",lt,[s[14]||(s[14]=t("h4",null,"商品销售详情",-1)),t("div",nt,"总成本: ¥"+o(a.formatMoney(e.yesterday.totalCost)),1)]),t("div",dt,[t("table",null,[s[15]||(s[15]=t("thead",null,[t("tr",null,[t("th",null,"商品名称"),t("th",null,"销售数量"),t("th",null,"销售额"),t("th",null,"利润")])],-1)),t("tbody",null,[(r(!0),i(g,null,f(e.yesterday.productSalesInfoDTOS,l=>(r(),i("tr",{key:l.productId},[t("td",null,o(l.productName),1),t("td",null,o(l.quantity),1),t("td",null,"¥"+o(a.formatMoney(l.totalSales)),1),t("td",null,"¥"+o(a.formatMoney(l.totalProfit)),1)]))),128))])])])],512),[[_,e.expandedCard==="yesterday"]])],2)):M("",!0),e.thisMonth?(r(),i("div",{key:2,class:D([{expanded:e.expandedCard==="month"},"stats-card"]),onClick:s[2]||(s[2]=l=>a.toggleCard("month"))},[t("div",rt,[s[16]||(s[16]=t("h3",{class:"card-title"},"当月数据",-1)),t("span",it,o(a.getCurrentMonth()),1)]),t("div",ct,[t("div",ut,[c(d,{class:"stat-icon",name:"orders-o"}),t("div",mt,[s[17]||(s[17]=t("div",{class:"stat-label"},"订单数",-1)),t("div",ht,o(a.formatNumber(e.thisMonth.orderCount)),1)])]),t("div",yt,[c(d,{class:"stat-icon",name:"gold-coin-o"}),t("div",vt,[s[18]||(s[18]=t("div",{class:"stat-label"},"销售额",-1)),t("div",_t,"¥"+o(a.formatMoney(e.thisMonth.totalSales)),1)])]),t("div",gt,[c(d,{class:"stat-icon",name:"chart-trending-o"}),t("div",ft,[s[19]||(s[19]=t("div",{class:"stat-label"},"总利润",-1)),t("div",Dt,"¥"+o(a.formatMoney(e.thisMonth.totalProfit)),1)])])]),v(t("div",Mt,[t("div",St,[s[20]||(s[20]=t("h4",null,"商品销售详情",-1)),t("div",Ct,"总成本: ¥"+o(a.formatMoney(e.thisMonth.totalCost)),1)]),t("div",bt,[t("table",null,[s[21]||(s[21]=t("thead",null,[t("tr",null,[t("th",null,"商品名称"),t("th",null,"销售数量"),t("th",null,"销售额"),t("th",null,"利润")])],-1)),t("tbody",null,[(r(!0),i(g,null,f(e.thisMonth.productSalesInfoDTOS,l=>(r(),i("tr",{key:l.productId},[t("td",null,o(l.productName),1),t("td",null,o(l.quantity),1),t("td",null,"¥"+o(a.formatMoney(l.totalSales)),1),t("td",null,"¥"+o(a.formatMoney(l.totalProfit)),1)]))),128))])])])],512),[[_,e.expandedCard==="month"]])],2)):M("",!0)])])]),_:1},8,["modelValue","onRefresh"])}const pt=N(k,[["render",wt],["__scopeId","data-v-f58b26c1"]]);export{pt as default};
