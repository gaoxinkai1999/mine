import{k as g,D as _,X as a,c as k,b as t,w as i,g as v,d as h,x as u,P as C,B as y}from"./index-C0qELFvz.js";import{C as P}from"./index-CJZx8lX5.js";/* empty css              */import"./index-C-sx0Abo.js";import"./index-KpkTHw7S.js";import{F as V}from"./index-l99pA0pT.js";import{N as w}from"./index-DvCqQQ0t.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as b}from"./index-BHDKT0-x.js";import"./use-id-DTylsVlq.js";const R={name:"SetShop",data(){return{shop:{},showPicker:!1,priceRules:[]}},mounted(){this.getShop(),this.getPriceRules()},methods:{onConfirm(n){this.shop.priceRule=n,this.showPicker=!1},getPriceRules(){this.$http.post("/priceRule/findByIsDel",this.$qs.stringify({isDel:!1})).then(n=>{this.priceRules=n.data})},async getShop(){this.shop=await g.shop.getShop({id:this.$route.query.id})},delShop(){_.confirm({title:"是否确认删除",message:""}).then(()=>{this.$http.post("shop/updateIsDelById",this.$qs.stringify({id:this.shop.id})).then(()=>{a.success("删除成功"),this.$router.push({path:"/MyShop"})})}).catch(()=>{})},goToInfo(){this.$router.push({path:"/ShopInfo",query:{id:this.shop.id}})},saveChanges(){this.$http.post("/shop/updateShopInfo",this.shop).then(()=>{a.success("保存成功"),this.goToInfo()})},cancelChanges(){this.goToInfo()}}},x={style:{"margin-top":"3vh"}},B={style:{display:"flex","justify-content":"space-around"}};function I(n,e,D,N,o,l){const m=w,p=V,c=b,d=C,r=y,f=P;return v(),k("div",null,[t(m,{"right-text":"删除商家",title:"修改商家",onClickRight:e[0]||(e[0]=s=>l.delShop())}),t(f,{inset:"",title:"基本信息"},{default:i(()=>[t(p,{modelValue:o.shop.location,"onUpdate:modelValue":e[1]||(e[1]=s=>o.shop.location=s),label:"地区",size:"large"},null,8,["modelValue"]),t(p,{modelValue:o.shop.name,"onUpdate:modelValue":e[2]||(e[2]=s=>o.shop.name=s),label:"商家名",size:"large"},null,8,["modelValue"]),t(p,{value:o.shop.priceRule.name,clickable:"",label:"选择器",name:"picker",placeholder:"点击选择城市",readonly:"",onClick:e[3]||(e[3]=s=>o.showPicker=!0)},null,8,["value"]),t(d,{modelValue:o.showPicker,"onUpdate:modelValue":e[5]||(e[5]=s=>o.showPicker=s),position:"bottom"},{default:i(()=>[t(c,{columns:o.priceRules,"show-toolbar":"","value-key":"name",onCancel:e[4]||(e[4]=s=>o.showPicker=!1),onConfirm:l.onConfirm},null,8,["columns","onConfirm"])]),_:1},8,["modelValue"]),h("div",x,[h("div",B,[t(r,{type:"success",onClick:l.saveChanges},{default:i(()=>e[6]||(e[6]=[u("保存")])),_:1},8,["onClick"]),t(r,{type:"warning",onClick:l.cancelChanges},{default:i(()=>e[7]||(e[7]=[u("取消")])),_:1},8,["onClick"])])])]),_:1})])}const $=S(R,[["render",I]]);export{$ as default};
