import{bB as Re,br as ge,bb as $e,bn as Ve,K as Ue,aZ as Be,a as _e,bp as ze,C as j,E as G,r as P,b6 as Ae,a1 as se,j as C,bt as Pe,av as Oe,bg as je,A,b7 as we,ba as ee,L,bc as J,bC as ye,bD as Ee,b as x,M as W,O as Me,ay as D,U as te,b5 as Ge,as as He,b8 as ae,bE as Je,o as xe,aT as Le,bF as De,N,bG as p,bf as Qe,bs as ve,bk as he,H as Te,J as me,bH as qe,be as pe,bI as Se,bJ as et,bK as tt,aB as at,aw as Ne,az as nt,au as it,aM as lt,aH as ot,Q as st,aR as rt,z as ct,bL as ut,aQ as dt,S as ft,ax as Ce,G as vt}from"./index-C0qELFvz.js";import{u as We}from"./use-id-DTylsVlq.js";import{T as ht}from"./use-tab-status-Bni8MSz3.js";import{u as bt}from"./use-refs-HP3ZCcq4.js";function gt(e,r,s){let l,d=0;const t=e.scrollLeft,f=s===0?1:Math.round(s*1e3/16);let o=t;function h(){Re(l)}function b(){o+=(r-t)/f,e.scrollLeft=o,++d<f&&(l=ge(b))}return b(),h}function mt(e,r,s,l){let d,t=$e(e);const f=t<r,o=s===0?1:Math.round(s*1e3/16),h=(r-t)/o;function b(){Re(d)}function n(){t+=h,(f&&t>r||!f&&t<r)&&(t=r),Ve(e,t),f&&t<r||!f&&t>r?d=ge(n):d=ge(l)}return n(),b}function Ye(e,r){if(!Ue||!window.IntersectionObserver)return;const s=new IntersectionObserver(t=>{r(t[0].intersectionRatio>0)},{root:document.body}),l=()=>{e.value&&s.observe(e.value)},d=()=>{e.value&&s.unobserve(e.value)};Be(d),_e(d),ze(l)}const[wt,yt]=j("sticky"),xt={zIndex:W,position:Me("top"),container:Object,offsetTop:D(0),offsetBottom:D(0)};var Tt=G({name:wt,props:xt,emits:["scroll","change"],setup(e,{emit:r,slots:s}){const l=P(),d=Ae(l),t=se({fixed:!1,width:0,height:0,transform:0}),f=P(!1),o=C(()=>Pe(e.position==="top"?e.offsetTop:e.offsetBottom)),h=C(()=>{if(f.value)return;const{fixed:c,height:I,width:g}=t;if(c)return{width:`${g}px`,height:`${I}px`}}),b=C(()=>{if(!t.fixed||f.value)return;const c=Oe(je(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${o.value}px`});return t.transform&&(c.transform=`translate3d(0, ${t.transform}px, 0)`),c}),n=c=>r("scroll",{scrollTop:c,isFixed:t.fixed}),y=()=>{if(!l.value||ee(l))return;const{container:c,position:I}=e,g=J(l),k=$e(window);if(t.width=g.width,t.height=g.height,I==="top")if(c){const v=J(c),O=v.bottom-o.value-t.height;t.fixed=o.value>g.top&&v.bottom>0,t.transform=O<0?O:0}else t.fixed=o.value>g.top;else{const{clientHeight:v}=document.documentElement;if(c){const O=J(c),w=v-O.top-o.value-t.height;t.fixed=v-o.value<g.bottom&&v>O.top,t.transform=w<0?-w:0}else t.fixed=v-o.value<g.bottom}n(k)};return A(()=>t.fixed,c=>r("change",c)),we("scroll",y,{target:d,passive:!0}),Ye(l,y),A([ye,Ee],()=>{!l.value||ee(l)||!t.fixed||(f.value=!0,L(()=>{const c=J(l);t.width=c.width,t.height=c.height,f.value=!1}))}),()=>{var c;return x("div",{ref:l,style:h.value},[x("div",{class:yt({fixed:t.fixed&&!f.value}),style:b.value},[(c=s.default)==null?void 0:c.call(s)])])}}});const St=te(Tt),[Ze,le]=j("swipe"),Ct={loop:N,width:W,height:W,vertical:Boolean,autoplay:D(0),duration:D(500),touchable:N,lazyRender:Boolean,initialSwipe:D(0),indicatorColor:String,showIndicators:N,stopPropagation:N},Fe=Symbol(Ze);var It=G({name:Ze,props:Ct,emits:["change","dragStart","dragEnd"],setup(e,{emit:r,slots:s}){const l=P(),d=P(),t=se({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let f=!1;const o=Ge(),{children:h,linkChildren:b}=He(Fe),n=C(()=>h.length),y=C(()=>t[e.vertical?"height":"width"]),c=C(()=>e.vertical?o.deltaY.value:o.deltaX.value),I=C(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-y.value*n.value:0),g=C(()=>y.value?Math.ceil(Math.abs(I.value)/y.value):n.value),k=C(()=>n.value*y.value),v=C(()=>(t.active+n.value)%n.value),O=C(()=>{const i=e.vertical?"vertical":"horizontal";return o.direction.value===i}),w=C(()=>{const i={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(y.value){const T=e.vertical?"height":"width",S=e.vertical?"width":"height";i[T]=`${k.value}px`,i[S]=e[S]?`${e[S]}px`:""}return i}),F=i=>{const{active:T}=t;return i?e.loop?ve(T+i,-1,n.value):ve(T+i,0,g.value):T},X=(i,T=0)=>{let S=i*y.value;e.loop||(S=Math.min(S,-I.value));let _=T-S;return e.loop||(_=ve(_,I.value,0)),_},$=({pace:i=0,offset:T=0,emitChange:S})=>{if(n.value<=1)return;const{active:_}=t,a=F(i),u=X(a,T);if(e.loop){if(h[0]&&u!==I.value){const m=u<I.value;h[0].setOffset(m?k.value:0)}if(h[n.value-1]&&u!==0){const m=u>0;h[n.value-1].setOffset(m?-k.value:0)}}t.active=a,t.offset=u,S&&a!==_&&r("change",v.value)},H=()=>{t.swiping=!0,t.active<=-1?$({pace:n.value}):t.active>=n.value&&$({pace:-n.value})},Y=()=>{H(),o.reset(),p(()=>{t.swiping=!1,$({pace:-1,emitChange:!0})})},Q=()=>{H(),o.reset(),p(()=>{t.swiping=!1,$({pace:1,emitChange:!0})})};let Z;const B=()=>clearTimeout(Z),K=()=>{B(),+e.autoplay>0&&n.value>1&&(Z=setTimeout(()=>{Q(),K()},+e.autoplay))},E=(i=+e.initialSwipe)=>{if(!l.value)return;const T=()=>{var S,_;if(!ee(l)){const a={width:l.value.offsetWidth,height:l.value.offsetHeight};t.rect=a,t.width=+((S=e.width)!=null?S:a.width),t.height=+((_=e.height)!=null?_:a.height)}n.value&&(i=Math.min(n.value-1,i),i===-1&&(i=n.value-1)),t.active=i,t.swiping=!0,t.offset=X(i),h.forEach(a=>{a.setOffset(0)}),K()};ee(l)?L().then(T):T()},V=()=>E(t.active);let q;const re=i=>{!e.touchable||i.touches.length>1||(o.start(i),f=!1,q=Date.now(),B(),H())},ce=i=>{e.touchable&&t.swiping&&(o.move(i),O.value&&(!e.loop&&(t.active===0&&c.value>0||t.active===n.value-1&&c.value<0)||(Qe(i,e.stopPropagation),$({offset:c.value}),f||(r("dragStart",{index:v.value}),f=!0))))},ne=()=>{if(!e.touchable||!t.swiping)return;const i=Date.now()-q,T=c.value/i;if((Math.abs(T)>.25||Math.abs(c.value)>y.value/2)&&O.value){const _=e.vertical?o.offsetY.value:o.offsetX.value;let a=0;e.loop?a=_>0?c.value>0?-1:1:0:a=-Math[c.value>0?"ceil":"floor"](c.value/y.value),$({pace:a,emitChange:!0})}else c.value&&$({pace:0});f=!1,t.swiping=!1,r("dragEnd",{index:v.value}),K()},ue=(i,T={})=>{H(),o.reset(),p(()=>{let S;e.loop&&i===n.value?S=t.active===0?0:i:S=i%n.value,T.immediate?p(()=>{t.swiping=!1}):t.swiping=!1,$({pace:S-t.active,emitChange:!0})})},de=(i,T)=>{const S=T===v.value,_=S?{backgroundColor:e.indicatorColor}:void 0;return x("i",{style:_,class:le("indicator",{active:S})},null)},fe=()=>{if(s.indicator)return s.indicator({active:v.value,total:n.value});if(e.showIndicators&&n.value>1)return x("div",{class:le("indicators",{vertical:e.vertical})},[Array(n.value).fill("").map(de)])};return ae({prev:Y,next:Q,state:t,resize:V,swipeTo:ue}),b({size:y,props:e,count:n,activeIndicator:v}),A(()=>e.initialSwipe,i=>E(+i)),A(n,()=>E(t.active)),A(()=>e.autoplay,K),A([ye,Ee,()=>e.width,()=>e.height],V),A(Je(),i=>{i==="visible"?K():B()}),xe(E),Le(()=>E(t.active)),De(()=>E(t.active)),Be(B),_e(B),we("touchmove",ce,{target:d}),()=>{var i;return x("div",{ref:l,class:le()},[x("div",{ref:d,style:w.value,class:le("track",{vertical:e.vertical}),onTouchstartPassive:re,onTouchend:ne,onTouchcancel:ne},[(i=s.default)==null?void 0:i.call(s)]),fe()])}}});const kt=te(It),[Rt,Ie]=j("tabs");var $t=G({name:Rt,props:{count:he(Number),inited:Boolean,animated:Boolean,duration:he(W),swipeable:Boolean,lazyRender:Boolean,currentIndex:he(Number)},emits:["change"],setup(e,{emit:r,slots:s}){const l=P(),d=o=>r("change",o),t=()=>{var o;const h=(o=s.default)==null?void 0:o.call(s);return e.animated||e.swipeable?x(kt,{ref:l,loop:!1,class:Ie("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},{default:()=>[h]}):h},f=o=>{const h=l.value;h&&h.state.active!==o&&h.swipeTo(o,{immediate:!e.inited})};return A(()=>e.currentIndex,f),xe(()=>{f(e.currentIndex)}),ae({swipeRef:l}),()=>x("div",{class:Ie("content",{animated:e.animated||e.swipeable})},[t()])}});const[Xe,oe]=j("tabs"),Bt={type:Me("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:D(0),duration:D(.3),animated:Boolean,ellipsis:N,swipeable:Boolean,scrollspy:Boolean,offsetTop:D(0),background:String,lazyRender:N,showHeader:N,lineWidth:W,lineHeight:W,beforeChange:Function,swipeThreshold:D(5),titleActiveColor:String,titleInactiveColor:String},Ke=Symbol(Xe);var _t=G({name:Xe,props:Bt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:r,slots:s}){let l,d,t,f,o;const h=P(),b=P(),n=P(),y=P(),c=We(),I=Ae(h),[g,k]=bt(),{children:v,linkChildren:O}=He(Ke),w=se({inited:!1,position:"",lineStyle:{},currentIndex:-1}),F=C(()=>v.length>+e.swipeThreshold||!e.ellipsis||e.shrink),X=C(()=>({borderColor:e.color,background:e.background})),$=(a,u)=>{var m;return(m=a.name)!=null?m:u},H=C(()=>{const a=v[w.currentIndex];if(a)return $(a,w.currentIndex)}),Y=C(()=>Pe(e.offsetTop)),Q=C(()=>e.sticky?Y.value+l:0),Z=a=>{const u=b.value,m=g.value;if(!F.value||!u||!m||!m[w.currentIndex])return;const z=m[w.currentIndex].$el,R=z.offsetLeft-(u.offsetWidth-z.offsetWidth)/2;f&&f(),f=gt(u,R,a?0:+e.duration)},B=()=>{const a=w.inited;L(()=>{const u=g.value;if(!u||!u[w.currentIndex]||e.type!=="line"||ee(h.value))return;const m=u[w.currentIndex].$el,{lineWidth:z,lineHeight:R}=e,M=m.offsetLeft+m.offsetWidth/2,U={width:Te(z),backgroundColor:e.color,transform:`translateX(${M}px) translateX(-50%)`};if(a&&(U.transitionDuration=`${e.duration}s`),me(R)){const ie=Te(R);U.height=ie,U.borderRadius=ie}w.lineStyle=U})},K=a=>{const u=a<w.currentIndex?-1:1;for(;a>=0&&a<v.length;){if(!v[a].disabled)return a;a+=u}},E=(a,u)=>{const m=K(a);if(!me(m))return;const z=v[m],R=$(z,m),M=w.currentIndex!==null;w.currentIndex!==m&&(w.currentIndex=m,u||Z(),B()),R!==e.active&&(r("update:active",R),M&&r("change",R,z.title)),t&&!e.scrollspy&&pe(Math.ceil(Se(h.value)-Y.value))},V=(a,u)=>{const m=v.find((R,M)=>$(R,M)===a),z=m?v.indexOf(m):0;E(z,u)},q=(a=!1)=>{if(e.scrollspy){const u=v[w.currentIndex].$el;if(u&&I.value){const m=Se(u,I.value)-Q.value;d=!0,o&&o(),o=mt(I.value,m,a?0:+e.duration,()=>{d=!1})}}},re=(a,u,m)=>{const{title:z,disabled:R}=v[u],M=$(v[u],u);R||(et(e.beforeChange,{args:[M],done:()=>{E(u),q()}}),tt(a)),r("clickTab",{name:M,title:z,event:m,disabled:R})},ce=a=>{t=a.isFixed,r("scroll",a)},ne=a=>{L(()=>{V(a),q(!0)})},ue=()=>{for(let a=0;a<v.length;a++){const{top:u}=J(v[a].$el);if(u>Q.value)return a===0?0:a-1}return v.length-1},de=()=>{if(e.scrollspy&&!d){const a=ue();E(a)}},fe=()=>{if(e.type==="line"&&v.length)return x("div",{class:oe("line"),style:w.lineStyle},null)},i=()=>{var a,u,m;const{type:z,border:R,sticky:M}=e,U=[x("div",{ref:M?void 0:n,class:[oe("wrap"),{[qe]:z==="line"&&R}]},[x("div",{ref:b,role:"tablist",class:oe("nav",[z,{shrink:e.shrink,complete:F.value}]),style:X.value,"aria-orientation":"horizontal"},[(a=s["nav-left"])==null?void 0:a.call(s),v.map(ie=>ie.renderTitle(re)),fe(),(u=s["nav-right"])==null?void 0:u.call(s)])]),(m=s["nav-bottom"])==null?void 0:m.call(s)];return M?x("div",{ref:n},[U]):U},T=()=>{B(),L(()=>{var a,u;Z(!0),(u=(a=y.value)==null?void 0:a.swipeRef.value)==null||u.resize()})};A(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],B),A(ye,T),A(()=>e.active,a=>{a!==H.value&&V(a)}),A(()=>v.length,()=>{w.inited&&(V(e.active),B(),L(()=>{Z(!0)}))});const S=()=>{V(e.active,!0),L(()=>{w.inited=!0,n.value&&(l=J(n.value).height),Z(!0)})},_=(a,u)=>r("rendered",a,u);return ae({resize:T,scrollTo:ne}),Le(B),De(B),ze(S),Ye(h,B),we("scroll",de,{target:I,passive:!0}),O({id:c,props:e,setLine:B,scrollable:F,onRendered:_,currentName:H,setTitleRefs:k,scrollIntoView:Z}),()=>x("div",{ref:h,class:oe([e.type])},[e.showHeader?e.sticky?x(St,{container:h.value,offsetTop:Y.value,onScroll:ce},{default:()=>[i()]}):i():null,x($t,{ref:y,count:v.length,inited:w.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:w.currentIndex,onChange:E},{default:()=>{var a;return[(a=s.default)==null?void 0:a.call(s)]}})])}});const[zt,ke]=j("tab"),At=G({name:zt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:W,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:N},setup(e,{slots:r}){const s=C(()=>{const d={},{type:t,color:f,disabled:o,isActive:h,activeColor:b,inactiveColor:n}=e;f&&t==="card"&&(d.borderColor=f,o||(h?d.backgroundColor=f:d.color=f));const c=h?b:n;return c&&(d.color=c),d}),l=()=>{const d=x("span",{class:ke("text",{ellipsis:!e.scrollable})},[r.title?r.title():e.title]);return e.dot||me(e.badge)&&e.badge!==""?x(at,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[d]}):d};return()=>x("div",{id:e.id,role:"tab",class:[ke([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:s.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[l()])}}),[Pt,Ot]=j("swipe-item");var Et=G({name:Pt,setup(e,{slots:r}){let s;const l=se({offset:0,inited:!1,mounted:!1}),{parent:d,index:t}=Ne(Fe);if(!d)return;const f=C(()=>{const b={},{vertical:n}=d.props;return d.size.value&&(b[n?"height":"width"]=`${d.size.value}px`),l.offset&&(b.transform=`translate${n?"Y":"X"}(${l.offset}px)`),b}),o=C(()=>{const{loop:b,lazyRender:n}=d.props;if(!n||s)return!0;if(!l.mounted)return!1;const y=d.activeIndicator.value,c=d.count.value-1,I=y===0&&b?c:y-1,g=y===c&&b?0:y+1;return s=t.value===y||t.value===I||t.value===g,s}),h=b=>{l.offset=b};return xe(()=>{L(()=>{l.mounted=!0})}),ae({setOffset:h}),()=>{var b;return x("div",{class:Ot(),style:f.value},[o.value?(b=r.default)==null?void 0:b.call(r):null])}}});const Mt=te(Et),[Ht,be]=j("tab"),Lt=Oe({},nt,{dot:Boolean,name:W,badge:W,title:String,disabled:Boolean,titleClass:it,titleStyle:[String,Object],showZeroBadge:N});var Dt=G({name:Ht,props:Lt,setup(e,{slots:r}){const s=We(),l=P(!1),d=vt(),{parent:t,index:f}=Ne(Ke);if(!t)return;const o=()=>{var g;return(g=e.name)!=null?g:f.value},h=()=>{l.value=!0,t.props.lazyRender&&L(()=>{t.onRendered(o(),e.title)})},b=C(()=>{const g=o()===t.currentName.value;return g&&!l.value&&h(),g}),n=P(""),y=P("");lt(()=>{const{titleClass:g,titleStyle:k}=e;n.value=g?ct(g):"",y.value=k&&typeof k!="string"?ut(dt(k)):k});const c=g=>x(At,ft({key:s,id:`${t.id}-${f.value}`,ref:t.setTitleRefs(f.value),style:y.value,class:n.value,isActive:b.value,controls:s,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:k=>g(d.proxy,f.value,k)},Ce(t.props,["type","color","shrink"]),Ce(e,["dot","badge","title","disabled","showZeroBadge"])),{title:r.title}),I=P(!b.value);return A(b,g=>{g?I.value=!1:p(()=>{I.value=!0})}),A(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),ot(ht,b),ae({id:s,renderTitle:c}),()=>{var g;const k=`${t.id}-${f.value}`,{animated:v,swipeable:O,scrollspy:w,lazyRender:F}=t.props;if(!r.default&&!v)return;const X=w||b.value;if(v||O)return x(Mt,{id:s,role:"tabpanel",class:be("panel-wrapper",{inactive:I.value}),tabindex:b.value?0:-1,"aria-hidden":!b.value,"aria-labelledby":k,"data-allow-mismatch":"attribute"},{default:()=>{var Y;return[x("div",{class:be("panel")},[(Y=r.default)==null?void 0:Y.call(r)])]}});const H=l.value||w||!F?(g=r.default)==null?void 0:g.call(r):null;return st(x("div",{id:s,role:"tabpanel",class:be("panel"),tabindex:X?0:-1,"aria-labelledby":k,"data-allow-mismatch":"attribute"},[H]),[[rt,X]])}}});const Ft=te(Dt),Xt=te(_t);export{Ft as T,Xt as a};
