# 采购管理模块

## 模块概述
采购管理模块负责处理商品的采购流程，从采购单创建到入库管理，支持基于销售预测的智能采购建议。

## 核心实体
- Purchase: 采购单主表
- PurchaseDetail: 采购明细
- PurchaseBatchInfo: 批次信息(生产日期/过期日期)

## 主要功能
1. 采购流程管理：
   - 创建采购单: createPurchaseOrder()
   - 取消采购单: cancelPurchaseOrder()
   - 入库处理: processPurchaseInStock()

2. 智能采购建议：
   - 计算预计销量: calculatePurchaseQuantity()
   - 生成采购建议: getOnSaleProductsWithPurchaseInfo()

## 核心业务流程
1. 采购单创建流程：
   - 创建采购单并设置"已下单"状态
   - 添加采购明细(商品、数量、金额)

2. 采购单入库流程：
   - 批次商品：创建批次记录并入库存
   - 非批次商品：直接入库
   - 更新采购单状态为"已入库"

3. 取消采购流程：
   - 已下单：直接删除采购单
   - 已入库：商品出库并删除采购单

## 预测与采购决策
1. 基于历史销售数据预测未来30天销量
2. 计算安全库存(默认5天销量)
3. 推荐采购量 = 预测销量 - 当前库存

## 与其他模块关系
- 依赖产品模块获取商品信息
- 依赖库存模块完成出入库
- 依赖预测模块计算采购量
- 依赖批次模块管理商品批次
